import{d as a,x as e,u as s,n as t,q as l,c as n,D as i,r as o,o as r,a as u,b as d,z as v,A as c,m,h as p,F as y,g as b,t as g,w as k,p as f,i as w,I as h,S as C,J as E,K as U,L as _}from"./index.023b5098.js";import"./vendor.46abe524.js";const x=a=>a.match(/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/)?"":"参数必须为字母开头的5-16位数字和字母组合",R=k("data-v-7b538838");f("data-v-7b538838");const A={class:"signin-container"},I={class:"signin-main"},N={class:"signin-title"},$=d("div",null,"嘿;-) 好巧在这里遇到您.",-1),T=b(" 这里是远浅自建用来叨叨的网站, 要是您懒得注册可以直接点这里去逛逛。 "),z=d("div",{class:"signin-info"}," 直接输入登录名称开始探险叭~我们很智能哒~会自动帮你切换登录/注册 ",-1),D={class:"signin-form"},V={class:"form-account"},j={key:0},F={class:"summary"},S=b(" 注册一下不会有任何损失,甚至会变得更加 "),Z=d("del",null,"沙雕",-1),q=b(" 快乐。 ");w();var G=a({expose:[],setup(a){const k=e(),f=s(),w=t(),G=l(""),H=l(""),J=l(""),K=l(!1),L=n((()=>f.state.User.Id));i(G,(a=>{a.trim()&&_({type:"loginName",value:a.trim()}).then((a=>{1000005===a.Result?K.value=!1:K.value=!0}))}));const M=async()=>{const a=x(G.value.trim());if(a)return void k.error(a);const e=await h({type:"loginName",value:G.value.trim(),password:J.value.trim()});if((null==e?void 0:e.ErrorCode)||!(null==e?void 0:e.Result))return void k.error(`${e.ErrorCode} ${e.ErrorMsg}`);const s=e.Result.Token,t=e.Result.TokenAvailableDays;C(s,t),f.dispatch(E.GET_AUTHED_USER_INFO),k.success(`欢迎 ${null==e?void 0:e.Result.UserInfo.Nickname} 前来观光`,{onClose(){w.back()}})},O=async()=>{const a=x(G.value.trim());if(a)return void k.error(a);(await U({type:"loginName",value:G.value.trim(),password:J.value.trim(),nickname:H.value.trim()})).ErrorCode||k.success(`注册成功,即将自动登录~ ${G.value}`,{onClose(){M()}})};return R(((a,e)=>{const s=o("router-link");return r(),u("div",A,[d("div",I,[d("div",N,[$,d("div",null,[d(s,{to:"/"},{default:R((()=>[T])),_:1})])]),z,d("div",D,[d("div",V,[v(d("input",{type:"text",name:"account",id:"account","onUpdate:modelValue":e[1]||(e[1]=a=>G.value=a),placeholder:"账户登录名称,字母开头的5-16位数字和字母组合"},null,512),[[c,G.value,void 0,{trim:!0}]])]),K.value?(r(),u("div",j,[v(d("input",{type:"text",name:"nickname",id:"nickname","onUpdate:modelValue":e[2]||(e[2]=a=>H.value=a),placeholder:"用户昵称"},null,512),[[c,H.value,void 0,{trim:!0}]])])):m("",!0),d("div",null,[v(d("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=a=>J.value=a),placeholder:"登录密码"},null,512),[[c,J.value,void 0,{trim:!0}]])]),d("div",null,[K.value?(r(),u("button",{key:0,type:"button",class:"btn-login-register",onClick:O}," 立即注册 ")):(r(),u("button",{key:1,type:"button",class:"btn-login-register",onClick:M}," 立即登录 "))])]),d("div",F,[S,Z,q,p(L)?(r(),u(y,{key:0},[b("很少有人让我心动 但你是第"+g(p(L))+"个。",1)],64)):m("",!0)])])])}))}});G.__scopeId="data-v-7b538838";export default G;
