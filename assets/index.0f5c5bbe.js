import{k as e,x as a,n as s,p as l,z as t,W as n,X as o,y as i,u as r,F as u,A as d,B as v,N as c,O as m,P as p}from"./vendor.18b3a30d.js";import{c as f,u as y,b as k,e as g,f as b,S as w,g as h}from"./index.e61a2594.js";const C=e=>e.match(/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/)?"":"参数必须为字母开头的5-16位数字和字母组合",x=c();m("data-v-7f7d81da");const U={class:"signin-container"},A={class:"signin-main"},N={class:"signin-title"},R=t("div",null,"嘿;-) 好巧在这里遇到您.",-1),$=d(" 这里是远浅自建用来叨叨的网站, 要是您懒得注册可以直接点这里去逛逛。 "),E=t("div",{class:"signin-info"}," 直接输入登录名称开始探险叭~我们很智能哒~会自动帮你切换登录/注册 ",-1),I={class:"signin-form"},_={class:"form-account"},z={key:0},V={class:"summary"},j=d(" 注册一下不会有任何损失,甚至会变得更加 "),T=t("del",null,"沙雕",-1),Z=d(" 快乐。 ");p();var B=e({expose:[],setup(e){const c=f(),m=y(),p=k(),B=ref(""),D=ref(""),F=ref(""),G=ref(!1),M=computed((()=>m.User.Id));watch(B,(e=>{e.trim()&&g({type:"loginName",value:e.trim()}).then((e=>{1000005===e.Result?G.value=!1:G.value=!0}))}));const O=async()=>{const e=C(B.value.trim());if(e)return void c.error(e);const a=await b({type:"loginName",value:B.value.trim(),password:F.value.trim()});if((null==a?void 0:a.ErrorCode)||!(null==a?void 0:a.Result))return void c.error(`${a.ErrorCode} ${a.ErrorMsg}`);const s=a.Result.Token,l=a.Result.TokenAvailableDays;w(s,l),m.GetAuthedUserInfo(),c.success(`欢迎 ${null==a?void 0:a.Result.UserInfo.Nickname} 前来观光`,{onClose(){p.back()}})},P=async()=>{const e=C(B.value.trim());if(e)return void c.error(e);(await h({type:"loginName",value:B.value.trim(),password:F.value.trim(),nickname:D.value.trim()})).ErrorCode||c.success(`注册成功,即将自动登录~ ${B.value}`,{onClose(){O()}})};return x(((e,c)=>{const m=a("router-link");return s(),l("div",U,[t("div",A,[t("div",N,[R,t("div",null,[t(m,{to:"/"},{default:x((()=>[$])),_:1})])]),E,t("div",I,[t("div",_,[n(t("input",{type:"text",name:"account",id:"account","onUpdate:modelValue":c[1]||(c[1]=e=>B.value=e),placeholder:"账户登录名称,字母开头的5-16位数字和字母组合"},null,512),[[o,B.value,void 0,{trim:!0}]])]),G.value?(s(),l("div",z,[n(t("input",{type:"text",name:"nickname",id:"nickname","onUpdate:modelValue":c[2]||(c[2]=e=>D.value=e),placeholder:"用户昵称"},null,512),[[o,D.value,void 0,{trim:!0}]])])):i("",!0),t("div",null,[n(t("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":c[3]||(c[3]=e=>F.value=e),placeholder:"登录密码"},null,512),[[o,F.value,void 0,{trim:!0}]])]),t("div",null,[G.value?(s(),l("button",{key:0,type:"button",class:"btn-login-register",onClick:P}," 立即注册 ")):(s(),l("button",{key:1,type:"button",class:"btn-login-register",onClick:O}," 立即登录 "))])]),t("div",V,[j,T,Z,r(M)?(s(),l(u,{key:0},[d("很少有人让我心动 但你是第"+v(r(M))+"个。",1)],64)):i("",!0)])])])}))}});B.__scopeId="data-v-7f7d81da";export default B;
