import{_ as h,d as x,v as w,u as U,m as N,E as I,r as R,o as l,c,a as e,f as T,w as b,g as F,y as p,z as v,h as n,H as _,l as D,F as V,t as S,I as $,S as z,J as G,p as L,i as M}from"./index.9f66ff77.js";const k=a=>a.match(/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/)?"":"\u53C2\u6570\u5FC5\u987B\u4E3A\u5B57\u6BCD\u5F00\u5934\u76845-16\u4F4D\u6570\u5B57\u548C\u5B57\u6BCD\u7EC4\u5408";const E=a=>(L("data-v-7f7d81da"),a=a(),M(),a),Z={class:"signin-container"},q={class:"signin-main"},H={class:"signin-title"},J=E(()=>e("div",null,"\u563F;-) \u597D\u5DE7\u5728\u8FD9\u91CC\u9047\u5230\u60A8.",-1)),P=E(()=>e("div",{class:"signin-info"}," \u76F4\u63A5\u8F93\u5165\u767B\u5F55\u540D\u79F0\u5F00\u59CB\u63A2\u9669\u53ED~\u6211\u4EEC\u5F88\u667A\u80FD\u54D2~\u4F1A\u81EA\u52A8\u5E2E\u4F60\u5207\u6362\u767B\u5F55/\u6CE8\u518C ",-1)),j={class:"signin-form"},K={class:"form-account"},O={key:0},Q={class:"summary"},W=E(()=>e("del",null,"\u6C99\u96D5",-1)),X=x({__name:"index",setup(a){const r=w(),B=U(),y=N(),t=ref(""),d=ref(""),i=ref(""),C=ref(!1),A=computed(()=>B.User.Id);watch(t,s=>{!s.trim()||I({type:"loginName",value:s.trim()}).then(u=>{u.Result===1000005?C.value=!1:C.value=!0})});const f=async()=>{const s=k(t.value.trim());if(s){r.error(s);return}const u=await $({type:"loginName",value:t.value.trim(),password:i.value.trim()});if((u==null?void 0:u.ErrorCode)||!(u!=null&&u.Result)){r.error(`${u.ErrorCode} ${u.ErrorMsg}`);return}const m=u.Result.Token,o=u.Result.TokenAvailableDays;z(m,o),B.GetAuthedUserInfo(),r.success(`\u6B22\u8FCE ${u==null?void 0:u.Result.UserInfo.Nickname} \u524D\u6765\u89C2\u5149`,{onClose(){y.back()}})},g=async()=>{const s=k(t.value.trim());if(s){r.error(s);return}(await G({type:"loginName",value:t.value.trim(),password:i.value.trim(),nickname:d.value.trim()})).ErrorCode||r.success(`\u6CE8\u518C\u6210\u529F,\u5373\u5C06\u81EA\u52A8\u767B\u5F55~ ${t.value}`,{onClose(){f()}})};return(s,u)=>{const m=R("router-link");return l(),c("div",Z,[e("div",q,[e("div",H,[J,e("div",null,[T(m,{to:"/"},{default:b(()=>[F(" \u8FD9\u91CC\u662F\u8FDC\u6D45\u81EA\u5EFA\u7528\u6765\u53E8\u53E8\u7684\u7F51\u7AD9, \u8981\u662F\u60A8\u61D2\u5F97\u6CE8\u518C\u53EF\u4EE5\u76F4\u63A5\u70B9\u8FD9\u91CC\u53BB\u901B\u901B\u3002 ")]),_:1})])]),P,e("div",j,[e("div",K,[p(e("input",{type:"text",name:"account",id:"account","onUpdate:modelValue":u[0]||(u[0]=o=>_(t)?t.value=o:null),placeholder:"\u8D26\u6237\u767B\u5F55\u540D\u79F0,\u5B57\u6BCD\u5F00\u5934\u76845-16\u4F4D\u6570\u5B57\u548C\u5B57\u6BCD\u7EC4\u5408"},null,512),[[v,n(t),void 0,{trim:!0}]])]),n(C)?(l(),c("div",O,[p(e("input",{type:"text",name:"nickname",id:"nickname","onUpdate:modelValue":u[1]||(u[1]=o=>_(d)?d.value=o:null),placeholder:"\u7528\u6237\u6635\u79F0"},null,512),[[v,n(d),void 0,{trim:!0}]])])):D("",!0),e("div",null,[p(e("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":u[2]||(u[2]=o=>_(i)?i.value=o:null),placeholder:"\u767B\u5F55\u5BC6\u7801"},null,512),[[v,n(i),void 0,{trim:!0}]])]),e("div",null,[n(C)?(l(),c("button",{key:0,type:"button",class:"btn-login-register",onClick:g}," \u7ACB\u5373\u6CE8\u518C ")):(l(),c("button",{key:1,type:"button",class:"btn-login-register",onClick:f}," \u7ACB\u5373\u767B\u5F55 "))])]),e("div",Q,[F(" \u6CE8\u518C\u4E00\u4E0B\u4E0D\u4F1A\u6709\u4EFB\u4F55\u635F\u5931,\u751A\u81F3\u4F1A\u53D8\u5F97\u66F4\u52A0 "),W,F(" \u5FEB\u4E50\u3002 "),n(A)?(l(),c(V,{key:0},[F("\u5F88\u5C11\u6709\u4EBA\u8BA9\u6211\u5FC3\u52A8 \u4F46\u4F60\u662F\u7B2C"+S(n(A))+"\u4E2A\u3002",1)],64)):D("",!0)])])])}}});var uu=h(X,[["__scopeId","data-v-7f7d81da"]]);export{uu as default};
