import{k as l,n as a,p as e,B as s,N as n,O as t,P as i,x as o,z as d,u as r,y as u,T as c,F as v,E as p}from"./vendor.18b3a30d.js";import{u as f,c as g,i as m,a as R,G as k}from"./index.e61a2594.js";import{_ as y}from"./index.vue_vue&type=style&index=0&lang.401498f5.js";import{_ as I}from"./SimpleInfoItem.b3f6f051.js";import"./time.93dfc2a8.js";const _=n();t("data-v-47ffa996");const b={class:"tips"};i();var h=l({expose:[],props:{title:String},setup(l){const n=l;return _(((l,t)=>(a(),e("div",b,s(n.title)+"~",1))))}});h.__scopeId="data-v-47ffa996";const x=n();t("data-v-94b7b0aa");const N={class:"user-header-container"},j={class:"avatar-container"},A={class:"user-info-container"},P={class:"user-info"},U={class:"nickname-op"},B={class:"nickname"},S={class:"user-article-cotainer"};i();var z=l({expose:[],props:{uid:{required:!0,type:Number,validator:l=>!isNaN(+l)}},setup(l){const n=l,t=f(),i=g(),{data:_}=m(n.uid);watch((()=>_.value.ErrorMsg),(l=>{l&&i.error(l)}));const b=reactive({list:[],page:1,loading:!1,loaded:!1}),z=computed((()=>{var l;return t.User.Id===(null==(l=_.value.Result)?void 0:l.Id)})),C=computed((()=>{var l;return`${null==(l=_.value.Result)?void 0:l.Nickname}的个人中心`}));R({title:C});const D=()=>{console.log("退出登录"),t.ResetUserStore(),i.success("退出登录成功~")},E=()=>{var l;b.loading=!0,k({UID:null==(l=_.value.Result)?void 0:l.Id,Page:b.page+1}).then((l=>{var a,e,s,n;0!==(null!=(e=null==(a=l.Result)?void 0:a.Articles)?e:[]).length?(b.page+=1,b.list=[...b.list,...null!=(n=null==(s=l.Result)?void 0:s.Articles)?n:[]]):b.loaded=!0})).finally((()=>{b.loading=!1}))};return onMounted((()=>{var l,a;l=n.uid,a=1,b.loading=!0,k({UID:l,Page:a=a||1}).then((l=>{var e,s;const n=null!=(s=null==(e=null==l?void 0:l.Result)?void 0:e.Articles)?s:[];b.page=a,b.list=n,0===n.length?b.loaded=!0:b.loaded=!1})).finally((()=>{b.loading=!1}))})),x(((l,n)=>{const t=o("Avatar"),i=o("LoadingBall");return a(),e(y,null,{default:x((()=>{var l,n,o,f,g;return[d("main",null,[d("div",N,[d("div",j,[d(t,{size:"150px",src:null==(l=r(_).Result)?void 0:l.Avatar},null,8,["src"])]),d("div",A,[d("div",P,[d("span",U,[d("span",B,s(null==(n=r(_).Result)?void 0:n.Nickname),1)]),r(z)?(a(),e("span",{key:0,class:"op-btn",onClick:D},"退出")):u("",!0)]),d("div",null,s(null==(o=r(_).Result)?void 0:o.Location)+" · "+s(null==(f=r(_).Result)?void 0:f.Profession),1),d("div",null,s(null==(g=r(_).Result)?void 0:g.Brief),1)])]),d("div",S,[d(c,{name:"list"},{default:x((()=>[(a(!0),e(v,null,p(b.list,(l=>(a(),e(I,{key:l.Id,info:l},null,8,["info"])))),128))])),_:1}),b.list.length>0&&!b.loaded&&!b.loading?(a(),e("div",{key:0,class:"more-list",onClick:E}," 加载更多 ")):u("",!0),d(i,{loading:b.list.length>0&&b.loading},null,8,["loading"]),b.loaded?(a(),e(h,{key:1,title:"世界终有尽头~"})):u("",!0)])])]})),_:1})}))}});z.__scopeId="data-v-94b7b0aa";export default z;
