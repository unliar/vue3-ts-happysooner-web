import{d as l,a,b as s,l as e,E as t,G as n,H as i,g as o,j as d,u as r,h as u,T as c,F as v,q as p}from"./vendor.8d059d2b.js";import{u as g,c as m,i as f,a as R,M as _,G as k}from"./index.6d51bcce.js";import{_ as I}from"./index.vue_vue&type=style&index=0&lang.2e9c245a.js";import{_ as h}from"./SimpleInfoItem.1430404a.js";import"./time.2aac0ac0.js";const y=t();n("data-v-47ffa996");const x={class:"tips"};i();var j=l({expose:[],props:{title:String},setup(l){const t=l;return y(((l,n)=>(a(),s("div",x,e(t.title)+"~",1))))}});j.__scopeId="data-v-47ffa996";const E=t();n("data-v-400d206c");const b={class:"user-header-container"},A={class:"avatar-container"},N={class:"user-info-container"},S={class:"user-info"},U={class:"nickname-op"},M={class:"nickname"},P={class:"user-article-cotainer"};i();var T=l({expose:[],props:{uid:{required:!0,type:Number,validator:l=>!isNaN(+l)}},setup(l){const t=l,n=g(),i=m(),{data:y}=f(t.uid);watch((()=>y.value.ErrorMsg),(l=>{l&&i.error(l)}));const x=reactive({list:[],page:1,loading:!1,loaded:!1}),T=computed((()=>{var l;return n.state.User.Id===(null==(l=y.value.Result)?void 0:l.Id)})),q=computed((()=>{var l;return`${null==(l=y.value.Result)?void 0:l.Nickname}的个人中心`}));R({title:q});const B=()=>{console.log("退出登录"),n.commit(_.RESET_USER_STORE),i.success("退出登录成功~")},C=()=>{var l;x.loading=!0,k({UID:null==(l=y.value.Result)?void 0:l.Id,Page:x.page+1}).then((l=>{var a,s,e,t;0!==(null!=(s=null==(a=l.Result)?void 0:a.Articles)?s:[]).length?(x.page+=1,x.list=[...x.list,...null!=(t=null==(e=l.Result)?void 0:e.Articles)?t:[]]):x.loaded=!0})).finally((()=>{x.loading=!1}))};return onMounted((()=>{var l,a;l=t.uid,a=1,x.loading=!0,k({UID:l,Page:a=a||1}).then((l=>{var s,e;const t=null!=(e=null==(s=null==l?void 0:l.Result)?void 0:s.Articles)?e:[];x.page=a,x.list=t,0===t.length?x.loaded=!0:x.loaded=!1})).finally((()=>{x.loading=!1}))})),E(((l,t)=>{const n=o("Avatar"),i=o("LoadingBall");return a(),s(I,null,{default:E((()=>{var l,t,o,g,m;return[d("main",null,[d("div",b,[d("div",A,[d(n,{size:"150px",src:null==(l=r(y).Result)?void 0:l.Avatar},null,8,["src"])]),d("div",N,[d("div",S,[d("span",U,[d("span",M,e(null==(t=r(y).Result)?void 0:t.Nickname),1)]),r(T)?(a(),s("span",{key:0,class:"op-btn",onClick:B},"退出")):u("",!0)]),d("div",null,e(null==(o=r(y).Result)?void 0:o.Location)+" · "+e(null==(g=r(y).Result)?void 0:g.Profession),1),d("div",null,e(null==(m=r(y).Result)?void 0:m.Brief),1)])]),d("div",P,[d(c,{name:"list"},{default:E((()=>[(a(!0),s(v,null,p(x.list,(l=>(a(),s(h,{key:l.Id,info:l},null,8,["info"])))),128))])),_:1}),x.list.length>0&&!x.loaded&&!x.loading?(a(),s("div",{key:0,class:"more-list",onClick:C}," 加载更多 ")):u("",!0),d(i,{loading:x.list.length>0&&x.loading},null,8,["loading"]),x.loaded?(a(),s(j,{key:1,title:"世界终有尽头~"})):u("",!0)])])]})),_:1})}))}});T.__scopeId="data-v-400d206c";export default T;
